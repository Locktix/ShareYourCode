<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SYC — Salle</title>
    <link rel="stylesheet" href="assets/styles.css">
    <!-- CodeMirror CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/lib/codemirror.css">
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/lib/codemirror.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/mode/javascript/javascript.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/mode/php/php.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/mode/css/css.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/mode/xml/xml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/mode/htmlmixed/htmlmixed.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/theme/material.css">
</head>
<body>
    <div class="container room">
        <header class="room-header">
            <div class="left">
                <a class="logo" href="index.html">SYC</a>
                <span class="room-id">Salle: <strong id="room-id-label"></strong></span>
                <button id="copy-link" class="btn small">Copier le lien</button>
                <button id="copy-readonly-link" class="btn small">Lien lecture seule</button>
            </div>
            <div class="right">
                <input id="filename" class="input small" placeholder="nom de fichier (ex: script.js)" />
                <select id="language" class="input small">
                    <option value="javascript">JavaScript</option>
                    <option value="htmlmixed">HTML</option>
                    <option value="css">CSS</option>
                    <option value="php">PHP</option>
                </select>
                <select id="theme" class="input small">
                    <option value="default">Clair</option>
                    <option value="material">Sombre (Material)</option>
                </select>
                <button id="download-code" class="btn small">Télécharger</button>
            </div>
        </header>

        <main class="split">
            <section class="editor-pane">
                <textarea id="editor" name="editor"></textarea>
            </section>
            <aside class="chat-pane">
                <div id="chat-log" class="chat-log"></div>
                <form id="chat-form" class="row">
                    <input id="chat-name" class="input small" placeholder="Nom" required>
                    <input id="chat-text" class="input" placeholder="Message" required>
                    <button class="btn" type="submit">Envoyer</button>
                </form>
            </aside>
        </main>
    </div>

    <script>
    // Extract params from URL
    const params = new URLSearchParams(window.location.search);
    const roomId = (params.get('room') || '').replace(/[^a-zA-Z0-9_-]/g, '');
    if (!roomId) { window.location.href = 'index.html'; }
    document.getElementById('room-id-label').textContent = roomId;

    // Configure backend base URL for GitHub Pages
    // Example: window.SYC_API_BASE = 'https://votre-domaine-php.tld';
    window.SYC_API_BASE = window.SYC_API_BASE || '';
    window.SYC_ROOM_ID = roomId;
    window.SYC_READONLY = params.get('readonly') === '1';
    </script>
    <script src="assets/app.js"></script>
</body>
<!-- If you see errors, ensure window.SYC_API_BASE points to a live PHP backend -->
</html>


